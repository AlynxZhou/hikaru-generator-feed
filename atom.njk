<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>{{ siteConfig.title }}</title>
  {% if themeConfig.avatar %}<icon>{{ getURL(themeConfig.avatar) }}</icon>{% endif %}
  {% if siteConfig.subtitle %}<subtitle>{{ siteConfig.subtitle }}</subtitle>{% endif %}
  <link href="{{ getURL(siteConfig.feed.path or "atom.xml") }}" rel="self" />
  {% if siteConfig.feed.hub %}<link href="{{ siteConfig.feed.hub }}" rel="hub"/>{% endif %}
  <link href="{{ getURL() }}" />
  {% if site.posts != null and site.posts.length > 0 %}
  <updated>{{ site.posts[0].updatedDate.toISOString() }}</updated>
  {% endif %}
  <id>{{ getURL() }}</id>
  {% if siteConfig.author %}
  <author>
    <name>{{ siteConfig.author }}</name>
    {% if siteConfig.email %}<email>{{ siteConfig.email }}</email>{% endif %}
  </author>
  {% endif %}
  <generator uri="https://github.com/AlynxZhou/hikaru/">Hikaru</generator>
  {% for post in site.posts.slice(0, siteConfig.feed.limit) %}
  {% if post.feed !== false %}
  <entry>
    <title>{{ post.title }}</title>
    <link href="{{ getURL(post.docPath) }}" />
    <id>{{ getURL(post.docPath) }}</id>
    <published>{{ post.createdDate.toISOString() }}</published>
    <updated>{{ post.updatedDate.toISOString() }}</updated>
    {% if siteConfig.feed.content and post.content %}
    <content type="html"><![CDATA[{{ removeControlChars(post.content) | safe }}]]></content>
    {% endif %}
    <summary type="html">
    {% if post.excerpt %}
    <![CDATA[{{ removeControlChars(post.excerpt) | safe }}]]>
    {% elif post.description %}
    <![CDATA[{{ removeControlChars(post.description) | safe }}]]>
    {% elif post.content %}
    <![CDATA[<p>{{ removeControlChars((post.content | striptags).substring(0, siteConfig.feed.contentLimit)) | safe }}...</p>]]>
    {% endif %}
    </summary>
    {% for category in post.categories %}
    <category term="{{ category.name }}" scheme="{{ getURL(category.docPath) }}" />
    {% endfor %}
    {% for tag in post.tags %}
    <category term="{{ tag.name }}" scheme="{{ getURL(tag.docPath) }}" />
    {% endfor %}
  </entry>
  {% endif %}
  {% endfor %}
</feed>
